<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Models â€” Toast Talent</title>
  <style>
    body { font-family: 'Helvetica Neue', Arial, sans-serif; margin:0; background:#fafafa; }
    header { background:#111; color:#fff; text-align:center; padding:16px 0; }
    h1 { margin:0; font-size:24px; letter-spacing:1px; }
    nav { display:flex; justify-content:center; background:#fff; border-bottom:1px solid #eee; }
    nav button {
      flex:1; padding:14px; background:none; border:none; cursor:pointer;
      font-weight:600; font-size:16px; color:#333; transition: all 0.2s;
    }
    nav button:hover { background:#f0f0f0; }
    nav button.active { border-bottom:3px solid #111; color:#111; }

    .models-container {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap:20px;
      padding:24px;
    }
    .model-card {
      background:#fff;
      border-radius:10px;
      overflow:hidden;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);
      text-align:center;
      transition: transform 0.2s;
    }
    .model-card:hover { transform:translateY(-4px); }
    .model-card img {
      width:100%;
      height:240px;
      object-fit:cover;
    }
    .model-card h3 {
      margin:8px 0 0;
      font-size:16px;
      color:#111;
    }
    .model-card p {
      margin:4px 0 12px;
      font-size:13px;
      color:#666;
    }
  </style>
</head>
<body>
  <header>
    <h1>Our Models</h1>
  </header>

  <nav>
    <button class="active" data-category="Women">Women</button>
    <button data-category="Men">Men</button>
    <button data-category="Kids">Kids</button>
  </nav>

  <main>
    <div id="models" class="models-container"></div>
  </main>

  <script>
    const API_BASE = (window.location.hostname.includes('toasttalent.co.za'))
      ? 'https://api.toasttalent.co.za'
      : (window.location.hostname.includes('onrender.com'))
      ? 'https://toast-talent-modeling-agency.onrender.com'
      : 'http://localhost:10000';

    const container = document.getElementById('models');
    const buttons = document.querySelectorAll('nav button');

    buttons.forEach(btn => btn.addEventListener('click', () => {
      buttons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      loadModels(btn.dataset.category);
    }));

    async function loadModels(category = 'Women') {
      container.innerHTML = '<p>Loading...</p>';
      try {
        const res = await fetch(`${API_BASE}/api/models`);
        const data = await res.json();

        const filtered = data.filter(m => m.category === category);
        if (!filtered.length) {
          container.innerHTML = `<p style="text-align:center;color:#777;">No ${category.toLowerCase()} models yet.</p>`;
          return;
        }

        container.innerHTML = filtered.map(m => `
          <div class="model-card">
            <img src="${m.profilePicture || '/placeholder.jpg'}" alt="${m.name}" />
            <h3>${m.name} ${m.surname}</h3>
            <p>${m.height ? m.height + ' cm' : ''}</p>
          </div>
        `).join('');
      } catch (err) {
        console.error(err);
        container.innerHTML = '<p>Error loading models.</p>';
      }
    }

    loadModels('Women');
  </script>
</body>
</html>
